@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 215 25% 15%;

    --card: 0 0% 100%;
    --card-foreground: 215 25% 15%;

    --popover: 0 0% 100%;
    --popover-foreground: 215 25% 15%;

    /* Transformation & Trust - Deep Teal */
    --primary: 187 85% 35%;
    --primary-foreground: 0 0% 100%;
    --primary-light: 187 65% 45%;
    
    /* Breakthrough & Energy - Warm Amber */
    --secondary: 35 95% 55%;
    --secondary-foreground: 215 25% 15%;
    --secondary-light: 35 95% 65%;

    /* Progress & Success - Soft Green */
    --success: 142 70% 45%;
    --success-foreground: 0 0% 100%;
    --success-light: 142 55% 55%;

    --muted: 210 15% 96%;
    --muted-foreground: 215 15% 45%;

    --accent: 187 85% 35%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    --border: 215 15% 90%;
    --input: 215 15% 90%;
    --ring: 187 85% 35%;

    --radius: 0.75rem;

    /* Gradients for impact */
    --gradient-hero: linear-gradient(135deg, hsl(187 85% 35%), hsl(187 75% 45%));
    --gradient-breakthrough: linear-gradient(135deg, hsl(35 95% 55%), hsl(35 95% 65%));
    --gradient-success: linear-gradient(135deg, hsl(142 70% 45%), hsl(142 60% 55%));
    --gradient-card: linear-gradient(145deg, hsl(0 0% 100%), hsl(210 20% 98%));

    /* Shadows for depth */
    --shadow-sm: 0 1px 2px 0 hsl(215 25% 15% / 0.05);
    --shadow-md: 0 4px 6px -1px hsl(215 25% 15% / 0.08), 0 2px 4px -1px hsl(215 25% 15% / 0.04);
    --shadow-lg: 0 10px 15px -3px hsl(215 25% 15% / 0.08), 0 4px 6px -2px hsl(215 25% 15% / 0.04);
    --shadow-xl: 0 20px 25px -5px hsl(215 25% 15% / 0.08), 0 10px 10px -5px hsl(215 25% 15% / 0.04);
    --shadow-glow: 0 0 20px hsl(187 85% 35% / 0.25);

    /* Transitions */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);

    /* Sidebar - Light Mode */
    --sidebar: 0 0% 100%;
    --sidebar-foreground: 215 25% 15%;
    --sidebar-primary: 187 85% 35%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 210 15% 96%;
    --sidebar-accent-foreground: 215 25% 15%;
    --sidebar-border: 215 15% 90%;
    --sidebar-ring: 187 85% 35%;
  }

  .dark {
    --background: 215 30% 8%;
    --foreground: 210 15% 95%;

    --card: 215 25% 12%;
    --card-foreground: 210 15% 95%;

    --popover: 215 25% 12%;
    --popover-foreground: 210 15% 95%;

    --primary: 187 75% 45%;
    --primary-foreground: 0 0% 100%;
    --primary-light: 187 65% 55%;

    --secondary: 35 90% 60%;
    --secondary-foreground: 215 25% 10%;
    --secondary-light: 35 90% 70%;

    --success: 142 60% 50%;
    --success-foreground: 0 0% 100%;
    --success-light: 142 50% 60%;

    --muted: 215 20% 18%;
    --muted-foreground: 215 10% 65%;

    --accent: 187 75% 45%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 65% 55%;
    --destructive-foreground: 0 0% 100%;

    --border: 215 20% 20%;
    --input: 215 20% 20%;
    --ring: 187 75% 45%;

    --gradient-hero: linear-gradient(135deg, hsl(187 75% 45%), hsl(187 65% 55%));
    --gradient-breakthrough: linear-gradient(135deg, hsl(35 90% 60%), hsl(35 90% 70%));
    --gradient-success: linear-gradient(135deg, hsl(142 60% 50%), hsl(142 50% 60%));
    --gradient-card: linear-gradient(145deg, hsl(215 25% 12%), hsl(215 22% 15%));

    --shadow-glow: 0 0 20px hsl(187 75% 45% / 0.3);

    /* Sidebar - Dark Mode (solid opaque background for contrast) */
    --sidebar: 215 25% 12%;
    --sidebar-foreground: 210 15% 95%;
    --sidebar-primary: 187 75% 45%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 215 20% 18%;
    --sidebar-accent-foreground: 210 15% 95%;
    --sidebar-border: 215 20% 20%;
    --sidebar-ring: 187 75% 45%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* ================================================
   Mind Insurance Dark Theme Styles
   ================================================ */

@layer components {
  /* Dark Input Styles for Mind Insurance */
  /* Using !important to override ShadCN's bg-background and text-foreground defaults */
  .mi-input {
    background-color: #0A1628 !important;
    color: white !important;
    @apply border-[#05c3dd]/30 placeholder:text-gray-500 rounded-md;
    @apply focus:ring-2 focus:ring-[#05c3dd] focus:border-[#05c3dd] focus:outline-none;
    @apply transition-all duration-200;
  }

  .mi-textarea {
    background-color: #0A1628 !important;
    color: white !important;
    @apply border-[#05c3dd]/30 placeholder:text-gray-500 rounded-md;
    @apply focus:ring-2 focus:ring-[#05c3dd] focus:border-[#05c3dd] focus:outline-none;
    @apply min-h-[100px] transition-all duration-200;
  }

  .mi-select {
    background-color: #0A1628 !important;
    color: white !important;
    @apply border-[#05c3dd]/30 rounded-md;
    @apply focus:ring-2 focus:ring-[#05c3dd] focus:border-[#05c3dd] focus:outline-none;
  }

  /* Dark Card Styles - main .mi-card defined OUTSIDE @layer for specificity */

  .mi-card-hover:hover {
    @apply border-[#05c3dd]/50 shadow-lg;
    box-shadow: 0 0 20px rgba(5, 195, 221, 0.1);
  }

  /* Dark Button Styles */
  .mi-btn-primary {
    @apply bg-[#05c3dd] hover:bg-[#0099aa] text-white font-medium;
    @apply transition-all duration-200 rounded-md;
    box-shadow: 0 0 20px rgba(5, 195, 221, 0.5), 0 0 40px rgba(5, 195, 221, 0.3);
  }

  .mi-btn-primary:hover {
    box-shadow: 0 0 25px rgba(5, 195, 221, 0.7), 0 0 50px rgba(5, 195, 221, 0.4);
  }

  .mi-btn-outline {
    @apply border border-[#05c3dd]/50 text-[#05c3dd] bg-transparent;
    @apply hover:bg-[#05c3dd]/10 hover:border-[#05c3dd];
    @apply transition-all duration-200 rounded-md;
  }

  .mi-btn-gold {
    @apply bg-[#fac832] hover:bg-[#e0b52d] text-[#0A1628] font-medium;
    @apply transition-all duration-200 rounded-md;
  }


  /* Play Button Style for Recording Vault */
  .mi-play-btn {
    background-color: #0A1628 !important;
    border-color: rgba(5, 195, 221, 0.4) !important;
    color: #05c3dd !important;
  }

  .mi-play-btn:hover {
    background-color: rgba(5, 195, 221, 0.1) !important;
    border-color: #05c3dd !important;
    color: white !important;
  }

  .mi-play-btn.playing {
    background-color: rgba(5, 195, 221, 0.2) !important;
    border-color: #05c3dd !important;
    color: #05c3dd !important;
  }

  /* Progress Bar Styles */
  .mi-progress-track {
    @apply bg-[#0A1628] rounded-full overflow-hidden;
  }

  .mi-progress-fill {
    @apply bg-[#05c3dd] rounded-full transition-all duration-300;
  }

  .mi-progress-fill-gold {
    @apply bg-[#fac832] rounded-full transition-all duration-300;
  }

  /* Badge Styles */
  .mi-badge-cyan {
    @apply bg-[#05c3dd]/20 text-[#05c3dd] border border-[#05c3dd]/30;
    @apply px-2 py-0.5 rounded-full text-xs font-medium;
  }

  .mi-badge-gold {
    @apply bg-[#fac832]/20 text-[#fac832] border border-[#fac832]/30;
    @apply px-2 py-0.5 rounded-full text-xs font-medium;
  }

  .mi-badge-success {
    @apply bg-green-500/20 text-green-400 border border-green-500/30;
    @apply px-2 py-0.5 rounded-full text-xs font-medium;
  }

  .mi-badge-error {
    @apply bg-red-500/20 text-red-400 border border-red-500/30;
    @apply px-2 py-0.5 rounded-full text-xs font-medium;
  }

  /* Skeleton Loading Styles */
  .mi-skeleton {
    @apply bg-[#0A1628] rounded animate-pulse;
  }

  /* Empty State Styles */
  .mi-empty-icon {
    @apply w-16 h-16 mx-auto rounded-full bg-[#05c3dd]/10 flex items-center justify-center;
  }
}

/* ================================================
   Mind Insurance Sidebar Dark Theme
   OUTSIDE @layer for proper CSS specificity
   ================================================ */

/* CSS Variable Overrides for Sidebar */
.mi-sidebar-dark {
  --sidebar: 215 38% 12%; /* #132337 mi-navy-light */
  --sidebar-foreground: 0 0% 100%;
  --sidebar-border: 186 95% 44%; /* cyan color for borders */
  --sidebar-accent: 215 45% 8%; /* #0A1628 mi-navy */
  --sidebar-accent-foreground: 0 0% 100%;
  --border: 186 95% 44%; /* for right edge border - cyan */
  background-color: #132337 !important;
}

/* Force ALL sidebar backgrounds to dark navy */
.mi-sidebar-dark,
.mi-sidebar-dark > *,
.mi-sidebar-dark [data-sidebar],
.mi-sidebar-dark [data-sidebar="sidebar"],
.mi-sidebar-dark [data-sidebar="content"],
.mi-sidebar-dark [data-sidebar="header"],
.mi-sidebar-dark [data-sidebar="menu"],
.mi-sidebar-dark [data-sidebar="menu-button"],
.mi-sidebar-dark .bg-sidebar {
  background-color: #132337 !important;
}

/* Sidebar accent backgrounds (hover states, user info) */
.mi-sidebar-dark .bg-sidebar-accent,
.mi-sidebar-dark [class*="bg-sidebar-accent"] {
  background-color: #0a1628 !important;
}

/* Text colors for readability */
.mi-sidebar-dark [data-sidebar="menu-button"] span,
.mi-sidebar-dark [data-sidebar="menu-button"] svg {
  color: #9ca3af !important; /* gray-400 */
}

.mi-sidebar-dark [data-sidebar="menu-button"]:hover span,
.mi-sidebar-dark [data-sidebar="menu-button"]:hover svg {
  color: #ffffff !important;
}

/* Override all nested border colors */
.mi-sidebar-dark,
.mi-sidebar-dark * {
  --border: 186 95% 44%;
  --sidebar-border: 186 95% 44%;
}

/* Separator override - HIGH SPECIFICITY to beat Tailwind utilities */
.mi-sidebar-dark [data-sidebar="separator"],
.mi-sidebar-dark [role="separator"],
.mi-sidebar-dark .bg-sidebar-border {
  background-color: rgba(5, 195, 221, 0.2) !important;
  background: rgba(5, 195, 221, 0.2) !important;
}

/* =============================================
   FIX #1: Horizontal line below header
   Target the first SidebarSeparator after SidebarHeader
   ============================================= */
.mi-sidebar-dark [data-sidebar="header"] + [data-slot="separator"],
.mi-sidebar-dark [data-sidebar="header"] + hr,
.mi-sidebar-dark [data-sidebar="header"] ~ [data-sidebar="separator"]:first-of-type {
  background-color: rgba(5, 195, 221, 0.2) !important;
  background: rgba(5, 195, 221, 0.2) !important;
}

/* =============================================
   FIX #2: Right edge vertical border
   The className is passed to the fixed inner div (line 203 in sidebar.tsx)
   which has: group-data-[side=left]:border-r
   ============================================= */

/* The mi-sidebar-dark class ends up on the fixed div with border-r */
.mi-sidebar-dark {
  border-color: rgba(5, 195, 221, 0.2) !important;
  border-right-color: rgba(5, 195, 221, 0.2) !important;
  border-left-color: rgba(5, 195, 221, 0.2) !important;
}

/* Target nested divs within the fixed sidebar */
.mi-sidebar-dark > div,
.mi-sidebar-dark > div > div {
  border-color: rgba(5, 195, 221, 0.2) !important;
}

/* Ultimate fallback - catch any border on any descendant */
.mi-sidebar-dark,
.mi-sidebar-dark *,
.mi-sidebar-dark::before,
.mi-sidebar-dark::after,
.mi-sidebar-dark > *,
.mi-sidebar-dark > * > * {
  border-color: rgba(5, 195, 221, 0.2) !important;
}

/* Also target via data attributes from sidebar.tsx */
[data-sidebar="sidebar"].mi-sidebar-dark,
.mi-sidebar-dark [data-sidebar="sidebar"] {
  border-color: rgba(5, 195, 221, 0.2) !important;
}

/* =============================================
   FIX #3: The fixed sidebar container with border-r
   This is the div on line 193-205 of sidebar.tsx that has
   group-data-[side=left]:border-r applied
   ============================================= */

/* Target the fixed inner wrapper that has the actual border-r */
.mi-sidebar-dark.fixed,
div.mi-sidebar-dark[class*="fixed"],
.peer .mi-sidebar-dark {
  border-right-color: rgba(5, 195, 221, 0.2) !important;
}

/* Target by the specific structure - the fixed div is a child of the peer group */
.peer[data-side="left"] > div.fixed,
.peer[data-side="left"] div[class*="border-r"],
div[data-side="left"] > div[class*="fixed"][class*="border-r"] {
  border-right-color: rgba(5, 195, 221, 0.2) !important;
}

/* Specifically target when mi-sidebar-dark is on the fixed container */
div.fixed.mi-sidebar-dark,
.mi-sidebar-dark.md\:flex {
  border-color: rgba(5, 195, 221, 0.2) !important;
  border-right-color: rgba(5, 195, 221, 0.2) !important;
}

/* Nuclear option - target ANY element with border-r inside the sidebar context */
.peer:has(.mi-sidebar-dark) div[class*="border-r"],
div:has(> .mi-sidebar-dark)[class*="border-r"] {
  border-right-color: rgba(5, 195, 221, 0.2) !important;
}

/* ================================================
   Teal Glassmorphic Sidebar Menu Buttons
   Premium 2026 active/hover states for Navigation
   and Account menu items with glass effect.
   ================================================ */

/* Active state - Teal gradient fill with glass effect */
.mi-sidebar-dark [data-sidebar="menu-button"][data-active="true"],
.mi-sidebar-dark [data-sidebar="menu-button"].bg-sidebar-accent {
  background: linear-gradient(135deg, hsl(187 85% 35% / 0.95), hsl(187 75% 45% / 0.85)) !important;
  border: 1px solid rgba(255, 255, 255, 0.18) !important;
  border-radius: 0.75rem !important;
  box-shadow:
    0 4px 12px rgba(0, 128, 128, 0.25),
    inset 0 1px 1px rgba(255, 255, 255, 0.2),
    inset 0 -1px 1px rgba(0, 0, 0, 0.1) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
}

/* Active state text - white for contrast */
.mi-sidebar-dark [data-sidebar="menu-button"][data-active="true"] span,
.mi-sidebar-dark [data-sidebar="menu-button"][data-active="true"] svg,
.mi-sidebar-dark [data-sidebar="menu-button"].bg-sidebar-accent span,
.mi-sidebar-dark [data-sidebar="menu-button"].bg-sidebar-accent svg {
  color: white !important;
}

/* Hover state - Subtle teal glass highlight */
.mi-sidebar-dark [data-sidebar="menu-button"]:not([data-active="true"]):hover {
  background: linear-gradient(135deg,
    rgba(255, 255, 255, 0.08) 0%,
    rgba(255, 255, 255, 0.03) 100%
  ) !important;
  border: 1px solid rgba(0, 128, 128, 0.3) !important;
  border-radius: 0.75rem !important;
  box-shadow:
    0 2px 8px rgba(0, 128, 128, 0.15),
    inset 0 1px 1px rgba(255, 255, 255, 0.1) !important;
}

/* Collapsible trigger active state (Resources section) */
.mi-sidebar-dark [data-sidebar="menu-button"].bg-sidebar-accent.text-sidebar-accent-foreground {
  background: linear-gradient(135deg, hsl(187 85% 35% / 0.95), hsl(187 75% 45% / 0.85)) !important;
}

/* ================================================
   MI Card Dark Theme - OUTSIDE @layer for max specificity
   This ensures Card borders are dark even when using
   ShadCN Card component with Tailwind's border class
   ================================================ */

/* Target the mi-card class with high specificity */
.mi-card,
div.mi-card,
.mi-card.rounded-lg,
div.mi-card.rounded-lg {
  background-color: #0D1B2A !important;
  border-color: rgba(5, 195, 221, 0.2) !important;
  border-style: solid !important;
  border-width: 1px !important;
}


/* Gold variant for special cards */
.mi-card-gold,
div.mi-card-gold {
  background-color: #0D1B2A !important;
  border-color: rgba(250, 200, 50, 0.3) !important;
  border-style: solid !important;
  border-width: 1px !important;
}

/* ================================================
   MIO Insights - One-Time Reward Animations
   ================================================
   These animations play ONCE on load to celebrate
   bonus insights and breakthroughs, then stop.
   This prevents the "strobe light" effect from
   continuous pulsing/bouncing animations.
   ================================================ */

/* One-time pulse animation for bonus insights */
@keyframes pulse-once {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.85;
    transform: scale(1.01);
  }
}

/* One-time bounce animation for breakthroughs */
@keyframes bounce-once {
  0%, 100% {
    transform: translateY(0);
  }
  20% {
    transform: translateY(-6px);
  }
  40% {
    transform: translateY(0);
  }
  60% {
    transform: translateY(-3px);
  }
  80% {
    transform: translateY(0);
  }
}

/* One-time glow animation for breakthroughs */
@keyframes glow-once {
  0%, 100% {
    box-shadow: 0 0 0 rgba(250, 204, 21, 0);
  }
  50% {
    box-shadow: 0 0 25px rgba(250, 204, 21, 0.5);
  }
}

/* ================================================
   Voice Tab - GHL Widget Integration Styles
   ================================================
   Premium Apple-style Voice tab with GHL widget
   integration and call history display.
   ================================================ */

/* GHL Widget Container - Native Styling */
.ghl-widget-wrapper {
  position: relative;
  background: linear-gradient(145deg,
    hsl(var(--card)) 0%,
    hsl(var(--muted) / 0.5) 100%
  );
  border: 1px solid hsl(var(--primary) / 0.2);
  border-radius: 1rem;
  box-shadow:
    0 0 30px hsl(var(--primary) / 0.15),
    inset 0 0 20px hsl(var(--primary) / 0.05);
  transition: all 0.3s ease;
}

.ghl-widget-wrapper:hover {
  border-color: hsl(var(--primary) / 0.3);
  box-shadow:
    0 0 40px hsl(var(--primary) / 0.2),
    inset 0 0 30px hsl(var(--primary) / 0.08);
}

/* Override GHL widget internal styles to match app design */
.ghl-widget-wrapper iframe,
.ghl-widget-wrapper [class*="ghl"],
.ghl-widget-wrapper [class*="chat-widget"] {
  border-radius: 0.75rem !important;
  border: none !important;
  background: transparent !important;
}

/* Voice Tab Animations */
@keyframes voice-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.5;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.3;
  }
}

@keyframes voice-ring {
  0% {
    transform: scale(0.8);
    opacity: 0.8;
  }
  100% {
    transform: scale(1.5);
    opacity: 0;
  }
}

/* Voice Call Card Enhancement */
.voice-call-card {
  transition: all 0.2s ease;
}

.voice-call-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px hsl(var(--primary) / 0.15);
}

/* Tab Switcher Premium Styling */
.tab-switcher-container {
  background: hsl(var(--muted) / 0.5);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Active tab glow effect */
.tab-active-voice {
  box-shadow: 0 0 15px hsl(var(--primary) / 0.2);
}

/* Phone status badge animations */
@keyframes phone-verified {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.phone-verified-badge {
  animation: phone-verified 0.4s ease-out;
}

/* Voice empty state pulse */
.voice-empty-pulse {
  animation: voice-pulse 3s ease-in-out infinite;
}

/* Hide GHL widget when on Chat tab - controlled via JS but CSS fallback */
body:has([data-active-tab="chat"]) [class*="ghl-chat"],
body:has([data-active-tab="chat"]) [id*="ghl-chat"] {
  display: none !important;
  pointer-events: none !important;
}

/* ============================================
   VOICE VISUALIZATION ANIMATIONS
   Grouphomes4newbies - Nette Voice Interface
   "Gateway to Expert Guidance"
   ============================================ */

@keyframes voice-breathing {
  0%, 100% {
    transform: scale(1);
    opacity: 0.5;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.7;
  }
}

@keyframes voice-speaking-pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.08);
  }
}

@keyframes voice-waveform-glow {
  0%, 100% {
    filter: drop-shadow(0 0 8px hsl(var(--primary) / 0.4));
  }
  50% {
    filter: drop-shadow(0 0 16px hsl(var(--primary) / 0.6));
  }
}

@keyframes voice-connecting-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes voice-success-ripple {
  0% {
    transform: scale(1);
    opacity: 0.6;
  }
  100% {
    transform: scale(2.5);
    opacity: 0;
  }
}

.animate-voice-breathing {
  animation: voice-breathing 4s ease-in-out infinite;
}

.animate-voice-speaking-pulse {
  animation: voice-speaking-pulse 1.5s ease-in-out infinite;
}

.animate-voice-waveform-glow {
  animation: voice-waveform-glow 2s ease-in-out infinite;
}

.animate-voice-connecting-spin {
  animation: voice-connecting-spin 2s linear infinite;
}

/* Accessibility: Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .animate-voice-breathing,
  .animate-voice-speaking-pulse,
  .animate-voice-waveform-glow,
  .animate-voice-connecting-spin {
    animation: none;
  }
}

/* ============================================
   GLASSMORPHIC UI UTILITIES
   Premium 2026 design system for voice interface
   Inspired by Apple Vision Pro, Hume AI, Raycast
   ============================================ */

/* Base glass effect */
.glass {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.1) 0%,
    rgba(255, 255, 255, 0.05) 100%
  );
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.18);
}

.dark .glass {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.08) 0%,
    rgba(255, 255, 255, 0.03) 100%
  );
  border: 1px solid rgba(255, 255, 255, 0.12);
}

/* Modern call button - glassmorphic with brand accent */
.modern-call-button {
  position: relative;
  /* Subtle teal/cyan tint for visibility against white background */
  background: linear-gradient(
    145deg,
    hsl(var(--primary) / 0.08) 0%,
    hsl(var(--primary) / 0.03) 50%,
    rgba(255, 255, 255, 0.1) 100%
  );
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  /* Enhanced shadows with brand color glow */
  box-shadow:
    0 0 0 1px hsl(var(--primary) / 0.15),
    0 8px 32px hsl(var(--primary) / 0.12),
    0 2px 8px rgba(0, 0, 0, 0.06),
    inset 0 1px 2px rgba(255, 255, 255, 0.3),
    inset 0 -1px 2px hsl(var(--primary) / 0.1);
  /* Visible border with primary color */
  border: 1.5px solid hsl(var(--primary) / 0.25);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.modern-call-button::before {
  content: '';
  position: absolute;
  inset: -3px;
  border-radius: inherit;
  background: radial-gradient(
    ellipse at center,
    hsl(var(--primary) / 0.15) 0%,
    hsl(var(--primary) / 0.05) 40%,
    transparent 70%
  );
  opacity: 0.6;
  transition: opacity 0.3s ease;
  z-index: -1;
}

.modern-call-button:hover {
  transform: translateY(-2px) scale(1.02);
  border-color: hsl(var(--primary) / 0.4);
  box-shadow:
    0 0 0 1px hsl(var(--primary) / 0.25),
    0 12px 40px hsl(var(--primary) / 0.2),
    0 4px 12px hsl(var(--primary) / 0.1),
    inset 0 1px 2px rgba(255, 255, 255, 0.4),
    inset 0 -1px 2px hsl(var(--primary) / 0.15);
}

.modern-call-button:hover::before {
  opacity: 1;
}

.modern-call-button:active {
  transform: translateY(0) scale(0.98);
  box-shadow:
    0 0 0 1px hsl(var(--primary) / 0.2),
    0 4px 16px hsl(var(--primary) / 0.1),
    0 1px 4px rgba(0, 0, 0, 0.06),
    inset 0 1px 1px rgba(255, 255, 255, 0.2),
    inset 0 -1px 2px hsl(var(--primary) / 0.15);
}

/* Active call state - destructive with glow */
.modern-call-button--active {
  background: linear-gradient(
    135deg,
    hsl(var(--destructive)) 0%,
    hsl(var(--destructive) / 0.85) 100%
  );
  border-color: hsl(var(--destructive) / 0.3);
  box-shadow:
    0 8px 32px hsl(var(--destructive) / 0.3),
    0 2px 8px hsl(var(--destructive) / 0.2),
    inset 0 1px 1px rgba(255, 255, 255, 0.2),
    inset 0 -1px 1px rgba(0, 0, 0, 0.2);
}

.modern-call-button--active:hover {
  box-shadow:
    0 12px 40px hsl(var(--destructive) / 0.4),
    0 4px 12px hsl(var(--destructive) / 0.25),
    inset 0 1px 1px rgba(255, 255, 255, 0.25),
    inset 0 -1px 1px rgba(0, 0, 0, 0.15);
}

/* Connecting state animation */
@keyframes modern-call-connecting {
  0%, 100% {
    box-shadow:
      0 8px 32px hsl(var(--primary) / 0.2),
      0 2px 8px rgba(0, 0, 0, 0.08),
      inset 0 1px 1px rgba(255, 255, 255, 0.25);
  }
  50% {
    box-shadow:
      0 8px 40px hsl(var(--primary) / 0.4),
      0 2px 12px hsl(var(--primary) / 0.15),
      inset 0 1px 1px rgba(255, 255, 255, 0.35);
  }
}

.modern-call-button--connecting {
  animation: modern-call-connecting 1.5s ease-in-out infinite;
}

/* Dark mode adjustments */
.dark .modern-call-button {
  background: linear-gradient(
    145deg,
    hsl(var(--primary) / 0.15) 0%,
    hsl(var(--primary) / 0.08) 50%,
    rgba(255, 255, 255, 0.05) 100%
  );
  border-color: hsl(var(--primary) / 0.35);
  box-shadow:
    0 0 0 1px hsl(var(--primary) / 0.25),
    0 8px 32px rgba(0, 0, 0, 0.4),
    0 2px 8px rgba(0, 0, 0, 0.3),
    inset 0 1px 1px rgba(255, 255, 255, 0.15),
    inset 0 -1px 1px rgba(0, 0, 0, 0.3);
}

.dark .modern-call-button:hover {
  border-color: hsl(var(--primary) / 0.5);
  box-shadow:
    0 0 0 1px hsl(var(--primary) / 0.35),
    0 12px 40px hsl(var(--primary) / 0.3),
    0 4px 12px rgba(0, 0, 0, 0.35),
    inset 0 1px 1px rgba(255, 255, 255, 0.2),
    inset 0 -1px 1px rgba(0, 0, 0, 0.25);
}

/* Outer glow ring for call button - always visible with subtle glow */
.modern-call-glow {
  position: absolute;
  inset: -8px;
  border-radius: 9999px;
  background: radial-gradient(
    circle at center,
    hsl(var(--primary) / 0.2) 0%,
    hsl(var(--primary) / 0.08) 40%,
    transparent 70%
  );
  opacity: 0.5;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.modern-call-button:hover + .modern-call-glow,
.modern-call-button:focus-visible + .modern-call-glow {
  opacity: 1;
}

/* Accessibility: Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .modern-call-button,
  .modern-call-button:hover,
  .modern-call-button:active {
    transition: none;
    transform: none;
  }

  .modern-call-button--connecting {
    animation: none;
  }
}
